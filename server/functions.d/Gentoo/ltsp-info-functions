# Local functions

packages() {
    chroot=$1
    if [ -d $chroot/var/db/pkg/net-misc/ltsp* ]; then
        cat $chroot/var/db/pkg/net-misc/ltsp*/PF
    fi
    if [ -d $chroot/var/db/pkg/sys-fs/ltspfs-* ]; then
        cat $chroot/var/db/pkg/sys-fs/ltspfs-*/PF
    fi
    if [ -d $chroot/var/db/pkg/*/ldm* ]; then
        cat $chroot/var/db/pkg/*/ldm*/PF
    fi
}

# Gentoo-specific function overrides for ltsp-info

server_packages() {
    echo server packages:
    packages
    echo
}

chroot_packages() {
    chroot=$1
    if [ -d $chroot/var/db/pkg ]; then
        echo "packages in chroot: $chroot"
        packages $chroot
        echo
    fi
}

chroot_release() {
    if [ -x $chroot/usr/bin/lsb_release ]; then
        echo "chroot information: $chroot"
        ROOT=$chroot ltsp-chroot lsb_release --all
        echo
    fi
}
